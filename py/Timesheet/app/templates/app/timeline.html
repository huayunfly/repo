{% extends "app/layout.html" %}

{% block content %}

    <h2>{{ title }}.</h2>
    <h3>{{ message }}</h3>

    <div id="build">
        <form id=target action="." method="post" class="form-horizontal">
        {% csrf_token %}
            <legend class="valtype" data-valtype="text">在本区域填写工时（%计）</legend>
            <div class="jumbotron">
                <table class="table table-hover">
                    <caption>项目工时</caption>
                    <thead>
                    <tr>
                        <th>日期</th>
                        <th>项目号</th>
                        <th>时间（%）</th>
                        <th>项目类型</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for task in tasks %}
                        <tr>
                            <td>
                                <select class="form-control" id={{ dayID }} name={{ forloop.counter0 | stringformat:"s" | add:dayID}}>
                                    {% for day in weekdays %}
                                        {% if day.date == task.workday %}
                                            <option selected>{{ day | date:"D, M j" }}</option>
                                        {% else %}
                                            <option>{{ day | date:"D, M j" }}</option>
                                        {% endif %}
                                    {% endfor %}
                                </select>
                            </td>
                            <td>
                                <select class="form-control" id={{ projectID }} name={{ forloop.counter0 | stringformat:"s" | add:projectID}}>
                                    {% for project in projects %}
                                        {% if task.project.project_id == project.project_id %}
                                            <option selected>{{ project.project_id }}</option>
                                        {% else %}
                                            <option>{{ project.project_id }}</option>
                                        {% endif %}
                                    {% endfor %}
                                </select>
                            </td>
                            <td>
                                <input class="form-control" id={{ timeID }} type="text" name={{ forloop.counter0 | stringformat:"s" | add:timeID}}
                                       value={{ task.t_percentage }}>
                            </td>
                            <td>
                                <input class="form-control" id="typeBox" type="text" name="typeBox"
                                       value={{ task.project.projecttype.typename }} readonly>
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
            <div class="form-group">
                <div class="col-md-offset-0 col-md-1">
                    <input type="submit" value="保存" class="btn btn-default"/>
                </div>
            </div>
        </form>
    </div>
{% endblock %}

{% block scripts %}

{% endblock %}